var U=Object.create;var L=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var q=Object.getPrototypeOf,z=Object.prototype.hasOwnProperty;var H=(i,r)=>()=>(r||i((r={exports:{}}).exports,r),r.exports);var Z=(i,r,l,A)=>{if(r&&typeof r=="object"||typeof r=="function")for(let f of D(r))!z.call(i,f)&&f!==l&&L(i,f,{get:()=>r[f],enumerable:!(A=W(r,f))||A.enumerable});return i};var G=(i,r,l)=>(l=i!=null?U(q(i)):{},Z(r||!i||!i.__esModule?L(l,"default",{value:i,enumerable:!0}):l,i));var N=H((E,I)=>{(function(i,r){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],r);else if(typeof E<"u")r(I);else{var l={exports:{}};r(l),i.browser=l.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:E,function(i){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){let r="The message port closed before a response was received.",l=A=>{let f={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(f).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class P extends WeakMap{constructor(s,t=void 0){super(t),this.createItem=s}get(s){return this.has(s)||this.set(s,this.createItem(s)),super.get(s)}}let F=e=>e&&typeof e=="object"&&typeof e.then=="function",M=(e,s)=>(...t)=>{A.runtime.lastError?e.reject(new Error(A.runtime.lastError.message)):s.singleCallbackArg||t.length<=1&&s.singleCallbackArg!==!1?e.resolve(t[0]):e.resolve(t)},h=e=>e==1?"argument":"arguments",_=(e,s)=>function(g,...o){if(o.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${h(s.minArgs)} for ${e}(), got ${o.length}`);if(o.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${h(s.maxArgs)} for ${e}(), got ${o.length}`);return new Promise((c,x)=>{if(s.fallbackToNoCallback)try{g[e](...o,M({resolve:c,reject:x},s))}catch(n){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,n),g[e](...o),s.fallbackToNoCallback=!1,s.noCallback=!0,c()}else s.noCallback?(g[e](...o),c()):g[e](...o,M({resolve:c,reject:x},s))})},S=(e,s,t)=>new Proxy(s,{apply(g,o,c){return t.call(o,e,...c)}}),y=Function.call.bind(Object.prototype.hasOwnProperty),w=(e,s={},t={})=>{let g=Object.create(null),o={has(x,n){return n in e||n in g},get(x,n,d){if(n in g)return g[n];if(!(n in e))return;let m=e[n];if(typeof m=="function")if(typeof s[n]=="function")m=S(e,e[n],s[n]);else if(y(t,n)){let b=_(n,t[n]);m=S(e,e[n],b)}else m=m.bind(e);else if(typeof m=="object"&&m!==null&&(y(s,n)||y(t,n)))m=w(m,s[n],t[n]);else if(y(t,"*"))m=w(m,s[n],t["*"]);else return Object.defineProperty(g,n,{configurable:!0,enumerable:!0,get(){return e[n]},set(b){e[n]=b}}),m;return g[n]=m,m},set(x,n,d,m){return n in g?g[n]=d:e[n]=d,!0},defineProperty(x,n,d){return Reflect.defineProperty(g,n,d)},deleteProperty(x,n){return Reflect.deleteProperty(g,n)}},c=Object.create(e);return new Proxy(c,o)},C=e=>({addListener(s,t,...g){s.addListener(e.get(t),...g)},hasListener(s,t){return s.hasListener(e.get(t))},removeListener(s,t){s.removeListener(e.get(t))}}),$=new P(e=>typeof e!="function"?e:function(t){let g=w(t,{},{getContent:{minArgs:0,maxArgs:0}});e(g)}),R=new P(e=>typeof e!="function"?e:function(t,g,o){let c=!1,x,n=new Promise(p=>{x=function(u){c=!0,p(u)}}),d;try{d=e(t,g,x)}catch(p){d=Promise.reject(p)}let m=d!==!0&&F(d);if(d!==!0&&!m&&!c)return!1;let b=p=>{p.then(u=>{o(u)},u=>{let v;u&&(u instanceof Error||typeof u.message=="string")?v=u.message:v="An unexpected error occurred",o({__mozWebExtensionPolyfillReject__:!0,message:v})}).catch(u=>{console.error("Failed to send onMessage rejected reply",u)})};return b(m?d:n),!0}),j=({reject:e,resolve:s},t)=>{A.runtime.lastError?A.runtime.lastError.message===r?s():e(new Error(A.runtime.lastError.message)):t&&t.__mozWebExtensionPolyfillReject__?e(new Error(t.message)):s(t)},O=(e,s,t,...g)=>{if(g.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${h(s.minArgs)} for ${e}(), got ${g.length}`);if(g.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${h(s.maxArgs)} for ${e}(), got ${g.length}`);return new Promise((o,c)=>{let x=j.bind(null,{resolve:o,reject:c});g.push(x),t.sendMessage(...g)})},B={devtools:{network:{onRequestFinished:C($)}},runtime:{onMessage:C(R),onMessageExternal:C(R),sendMessage:O.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:O.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},T={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return f.privacy={network:{"*":T},services:{"*":T},websites:{"*":T}},w(A,B,f)};i.exports=l(chrome)}else i.exports=globalThis.browser})});var k=G(N());var V=350,K=500,a={initialized:!1,myTabId:null,frame:null,container:null,open:!1,myPort:null};function J(){let i=document.createElement("div");i.style.zIndex="2147483647",i.style.display="block",i.style.visibility="hidden",i.style.opacity="1",a.container=i;let r=document.createElement("iframe");r.src=k.default.runtime.getURL("index.html"),r.style.position="fixed",r.style.top="10px",r.style.right="10px",r.style.width=V+"px",r.style.height=K+"px",r.style.border="none",r.style.zIndex="2147483647",r.style.overflow="hidden",r.style.display="block",r.style.background="wheat",r.style.boxShadow="0 0 10px rgba(0, 0, 0, 0.5)",r.style.borderRadius="8px",a.frame=r,a.container.appendChild(a.frame),document.body.appendChild(a.container),a.myPort=k.default.runtime.connect({name:"stateSyncChannel"}),a.myPort.onMessage.addListener(l=>{l.type==="stateUpdate"&&(console.log("MOC stateUpdate",l),l.state.ports&&(console.log("MOC stateUpdate, we had ports"),l.state.ports.forEach(A=>{console.log("MOC stateUpdate, comparing to myTabId: ",a.myTabId," and port.tabId: ",A.tabId),A.tabId===a.myTabId&&(console.log("MOC matching port! opening"),a.open=A.isOpen,a.open?a.container.style.visibility="visible":a.container.style.visibility="hidden")})))})}k.default.runtime.onMessage.addListener((i,r)=>{i.type==="toggleApp"&&(console.log("toggleApp heard. sending open state to background."),a.open=!a.open,a.myPort.postMessage({type:"setState",state:{isOpen:a.open}}),a.open?a.container.style.visibility="visible":a.container.style.visibility="hidden")});self===top&&J();
//# sourceMappingURL=content.js.map
